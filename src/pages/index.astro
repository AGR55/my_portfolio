---
import Layout from "../layouts/Layout.astro";
import HeroSection from "../components/sections/HeroSection.astro";
import AboutSection from "../components/sections/AboutSection.astro";
import ProjectsSection from "../components/sections/ProjectsSection.astro";
import ContactSection from "../components/sections/ContactSection.astro";
import { getCollection } from "astro:content";

// Get featured projects
const allProjects = await getCollection("projects");
const featuredProjects = allProjects.filter(project => project.data.featured);
---

<Layout 
  title="Your Name - Professional Portfolio"
  description="Professional portfolio showcasing my work, skills, and expertise in design and development."
>
  <HeroSection />
  <AboutSection />
  <ProjectsSection projects={featuredProjects} />
  <ContactSection />
</Layout>

<script>
  // Scroll animation
  document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          // Unobserve after animation is triggered
          observer.unobserve(entry.target);
        }
      });
    }, {
      root: null,
      threshold: 0.1, // Trigger animation when 10% of the element is visible
      rootMargin: '0px 0px -50px 0px' // Adjust based on your needs
    });
    
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });
  });
</script>